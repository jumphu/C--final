============================================
  堆叠物体摩擦力测试（修复版）
============================================

========================================
  两个球堆叠测试（简化版）
========================================
场景：两个球堆叠，测试正压力
  地面摩擦系数: 0.5
  球质量: 1.0 kg

让物体稳定30帧...

结果：
  Ball1正压力: 19.6 N (期望: 19.6 N)
  Ball2正压力: 9.8 N (期望: 9.8 N)
  Ball2支撑者: Ball1

? 支撑关系正确
? 正压力累积正确

========================================
  堆叠物体摩擦力测试（修复版）
========================================
修复方案：
  1. 物体初始静止
  2. 准确计算堆叠位置
  3. 等待稳定后给整体速度
  4. 弹性系数设为0（避免反弹）

场景设置：
  地面摩擦系数: 0.4
  每个球质量: 1.0 kg
  每个球半径: 5.0 m

初始位置（理论值）：
  Ball1: y = 5 (地面上)
  Ball2: y = 15 (Ball1上)
  Ball3: y = 25 (Ball2上)

第一阶段：让物体自然堆叠（50帧静止模拟）

--- Frame 10 ---
Ball1 - 位置: (  0.000,   5.000), 速度: (  0.000,   0.000)
Ball2 - 位置: (  0.000,  15.000), 速度: (  0.000,   0.000)
Ball3 - 位置: (  0.000,  25.000), 速度: (  0.000,   0.000)
  支撑关系: Ball1->地面, Ball2->Ball1_Bottom, Ball3->Ball2_Middle
  正压力: Ball1=29.4N, Ball2=19.6N, Ball3=9.8N

--- Frame 30 ---
Ball1 - 位置: (  0.000,   5.000), 速度: (  0.000,   0.000)
Ball2 - 位置: (  0.000,  15.000), 速度: (  0.000,   0.000)
Ball3 - 位置: (  0.000,  25.000), 速度: (  0.000,   0.000)
  支撑关系: Ball1->地面, Ball2->Ball1_Bottom, Ball3->Ball2_Middle
  正压力: Ball1=29.4N, Ball2=19.6N, Ball3=9.8N

--- Frame 50 ---
Ball1 - 位置: (  0.000,   5.000), 速度: (  0.000,   0.000)
Ball2 - 位置: (  0.000,  15.000), 速度: (  0.000,   0.000)
Ball3 - 位置: (  0.000,  25.000), 速度: (  0.000,   0.000)
  支撑关系: Ball1->地面, Ball2->Ball1_Bottom, Ball3->Ball2_Middle
  正压力: Ball1=29.4N, Ball2=19.6N, Ball3=9.8N

? 堆叠成功！支撑关系正确建立

正压力验证：
  Ball1: 29.4 N (期望: 29.4 N)
  Ball2: 19.6 N (期望: 19.6 N)
  Ball3: 9.8 N (期望: 9.8 N)
  ? Ball1正压力正确
  ? Ball2正压力正确
  ? Ball3正压力正确

第二阶段：给整个堆叠施加水平速度 8.0 m/s

模拟过程（每20帧显示一次）：

--- Frame 20 ---
Ball1 - 位置: (  2.056,   5.000), 速度: (  4.537,   0.000)
Ball2 - 位置: (  2.284,  14.994), 速度: (  5.838,   0.000)
Ball3 - 位置: (  2.667,  24.988), 速度: (  8.007,   0.000)
  正压力: Ball1=29.400, Ball2=19.600, Ball3=9.800

--- Frame 40 ---
Ball1 - 位置: (  3.110,   5.000), 速度: (  2.170,   0.000)
Ball2 - 位置: (  3.997,  14.962), 速度: (  4.764,  -0.327)
Ball3 - 位置: (  5.343,  24.883), 速度: (  8.049,  -0.817)
  正压力: Ball1=9.800, Ball2=9.800, Ball3=9.800

--- Frame 60 ---
Ball1 - 位置: (  3.498,   4.992), 速度: (  0.291,  -0.182)
Ball2 - 位置: (  5.462,  14.788), 速度: (  4.321,  -1.070)
Ball3 - 位置: (  8.095,  24.433), 速度: (  8.412,  -2.187)
  正压力: Ball1=9.800, Ball2=9.800, Ball3=9.800

--- Frame 80 ---
Ball1 - 位置: (  3.441,   4.990), 速度: ( -0.065,  -0.171)
Ball2 - 位置: (  7.002,  14.323), 速度: (  4.859,  -2.131)
Ball3 - 位置: ( 11.017,  23.479), 速度: (  8.957,  -3.927)
  正压力: Ball1=9.800, Ball2=9.800, Ball3=9.800

最终结果验证：
  Ball1最终速度: -0.065 m/s
  Ball2最终速度: 4.859 m/s
  Ball3最终速度: 8.957 m/s

? 测试通过！
  ? 堆叠成功
  ? 正压力累积正确
  ? 底部球减速最快（承受最大正压力）

============================================
  测试完成
============================================
